.sq-widget {
  --sq-gap: 8px;
  --sq-pad-v: max(8px, 1.6vw);
  --sq-pad-h: max(10px, 2.2vw);
  --sq-radius: max(14px, 1.8vw);
  --sq-extra-mt: 4px;
  --sq-foot-size: 13px;
  --sq-extra-size: 12px;
  --sq-label-size: 27px;
  --sq-hp-size: 21px;
  --sq-badge-size: 19px;
  --sq-badge-pad: 10px 14px;
  --sq-bar-height: 19px;
  --sq-chart-bg: rgba(255, 255, 255, 0.8);
  display: grid;
  gap: var(--sq-gap);
  width: 100%;
  padding: var(--sq-pad-v) var(--sq-pad-h);
  border-radius: var(--sq-radius);
  box-sizing: border-box;
  border: 1px solid var(--sq-accent-22, rgba(15, 23, 42, 0.22));
  background: linear-gradient(180deg, var(--sq-accent-14, rgba(15, 23, 42, 0.14)), rgba(255, 255, 255, 0.93));
  box-shadow: 0 10px 22px var(--sq-accent-10, rgba(15, 23, 42, 0.10));
  font-family: inherit;
}

.sq-widget.sq-legendary {
  --sq-gap: 12px;
  --sq-pad-v: max(14px, 2.6vw);
  --sq-pad-h: max(14px, 3.2vw);
  --sq-radius: max(18px, 2.2vw);
  --sq-extra-mt: 6px;
  --sq-foot-size: 15px;
  --sq-extra-size: 14px;
  --sq-label-size: 30px;
  --sq-hp-size: 25px;
  --sq-badge-size: 23px;
  --sq-badge-pad: 12px 18px;
  --sq-bar-height: 28px;
  --sq-chart-bg: rgba(255, 255, 255, 0.7);
  position: relative;
  overflow: hidden;
  isolation: isolate;
  transform: translateZ(0);
  background: linear-gradient(180deg, rgba(255, 252, 245, 0.96), rgba(255, 255, 255, 0.92));
  box-shadow: 0 22px 48px var(--sq-accent-20, rgba(15, 23, 42, 0.20)), 0 0 0 1px rgba(255, 230, 150, 0.12) inset;
}

.sq-widget.sq-legendary::before {
  content: "";
  position: absolute;
  inset: -40%;
  background:
    radial-gradient(circle at 20% 20%, rgba(255, 236, 170, .40), transparent 42%),
    radial-gradient(circle at 70% 30%, rgba(255, 210, 120, .32), transparent 45%),
    radial-gradient(circle at 50% 75%, rgba(255, 255, 255, .18), transparent 55%),
    radial-gradient(circle at 30% 80%, rgba(0, 0, 0, .10), transparent 55%);
  filter: blur(2px);
  opacity: .9;
  animation: sq_glowPulse 2.6s ease-in-out infinite;
  pointer-events: none;
  mix-blend-mode: overlay;
  z-index: 0;
}

.sq-widget.sq-legendary::after {
  content: "";
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle, rgba(255, 220, 120, .70) 1px, transparent 1.4px) 0 0/22px 22px,
    radial-gradient(circle, rgba(255, 245, 200, .55) 1px, transparent 1.4px) 10px 14px/28px 28px;
  opacity: .45;
  animation: sq_emberDrift 3.4s ease-in-out infinite;
  pointer-events: none;
  mix-blend-mode: screen;
  z-index: 0;
}

.sq-layer {
  position: relative;
  z-index: 2;
  display: grid;
  gap: var(--sq-gap);
}

.sq-top {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 14px;
}

.sq-left {
  display: flex;
  flex-direction: column;
  min-width: 0;
}

.sq-label {
  font-size: var(--sq-label-size);
  letter-spacing: 0.01em;
  opacity: 0.92;
}

.sq-widget.sq-legendary .sq-label {
  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.65);
}

.sq-titleLink {
  display: inline-block;
  color: inherit;
  text-decoration: none;
  font-weight: 700;
  max-width: 100%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.sq-titleLink:hover { text-decoration: underline; }

.sq-hpLine {
  font-size: var(--sq-hp-size);
  font-weight: 700;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.sq-widget.sq-legendary .sq-hpLine {
  font-weight: 900;
  text-shadow: 0 2px 12px rgba(255, 210, 120, 0.22);
}

.sq-badge {
  position: relative;
  isolation: isolate;
  font-size: var(--sq-badge-size);
  font-weight: 950;
  color: white;
  background: var(--sq-accent, rgb(15, 23, 42));
  padding: var(--sq-badge-pad);
  border-radius: 999px;
  white-space: nowrap;
  flex: 0 0 auto;
  line-height: 1;
  border: 1px solid var(--sq-accent-15, rgba(15, 23, 42, 0.15));
  box-shadow: 0 10px 24px var(--sq-accent-28, rgba(15, 23, 42, 0.28));
}

.sq-widget.sq-legendary .sq-badge {
  color: rgba(10, 12, 18, 0.92);
  background: linear-gradient(135deg, rgba(255, 246, 210, 1), rgba(255, 210, 120, 1), rgba(255, 245, 200, 1));
  border: 1px solid rgba(120, 78, 20, 0.35);
  box-shadow: 0 14px 30px rgba(255, 200, 110, 0.35), 0 2px 0 rgba(255, 255, 255, 0.65) inset;
}

.sq-widget.sq-legendary .sq-badge::before {
  content: "";
  position: absolute;
  inset: -8px;
  border-radius: 999px;
  background: conic-gradient(from 0deg,
    rgba(255, 255, 255, 0.00),
    rgba(255, 245, 200, 0.95),
    rgba(255, 255, 255, 0.00),
    rgba(255, 210, 120, 0.85),
    rgba(255, 255, 255, 0.00)
  );
  filter: blur(1.5px);
  opacity: .65;
  animation: sq_runeSpin 3.8s linear infinite;
  z-index: -1;
}

.sq-widget.sq-legendary .sq-badge::after {
  content: "";
  position: absolute;
  inset: -18px;
  border-radius: 999px;
  background: radial-gradient(circle, rgba(255, 220, 120, .28), transparent 60%);
  filter: blur(10px);
  opacity: .9;
  animation: sq_glowPulse 2.2s ease-in-out infinite;
  z-index: -2;
}

.sq-bar {
  position: relative;
  overflow: hidden;
  height: var(--sq-bar-height);
  background: rgba(0, 0, 0, 0.10);
  border-radius: 999px;
  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.06) inset;
}

.sq-widget.sq-legendary .sq-bar {
  background: linear-gradient(180deg, rgba(30, 22, 12, 0.18), rgba(0, 0, 0, 0.10));
  box-shadow: 0 10px 22px rgba(0, 0, 0, 0.10) inset, 0 0 0 1px rgba(255, 230, 150, 0.14) inset;
}

.sq-widget.sq-legendary .sq-bar::before {
  content: "";
  position: absolute;
  inset: -18px;
  border-radius: 999px;
  background:
    radial-gradient(circle at 20% 50%, rgba(255, 245, 200, .35), transparent 55%),
    radial-gradient(circle at 70% 45%, rgba(255, 210, 120, .25), transparent 55%);
  filter: blur(12px);
  opacity: .65;
  pointer-events: none;
  mix-blend-mode: screen;
}

.sq-barFill {
  height: 100%;
  border-radius: 999px;
  background: var(--sq-accent, rgb(15, 23, 42));
  transition: width 220ms ease;
}

.sq-widget.sq-legendary .sq-barFill {
  background: linear-gradient(90deg, rgba(255, 225, 145, 1), rgba(255, 190, 90, 1), rgba(255, 245, 200, 1));
  box-shadow: 0 10px 26px rgba(255, 200, 110, 0.45);
}

.sq-shimmer {
  position: absolute;
  top: -35%;
  bottom: -35%;
  width: 42%;
  background: linear-gradient(90deg, rgba(255, 255, 255, 0), rgba(255, 255, 255, .95), rgba(255, 255, 255, 0));
  animation: sq_shimmerSweep 1.45s ease-in-out infinite;
  pointer-events: none;
  mix-blend-mode: overlay;
  filter: blur(.2px);
}

.sq-runes {
  position: absolute;
  inset: 0;
  background:
    repeating-linear-gradient(90deg, rgba(255, 255, 255, 0.06) 0 2px, transparent 2px 12px),
    repeating-linear-gradient(0deg, rgba(255, 255, 255, 0.04) 0 2px, transparent 2px 14px);
  opacity: .35;
  pointer-events: none;
  mix-blend-mode: overlay;
}

.sq-foot {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 14px;
  font-size: var(--sq-foot-size);
  opacity: 0.95;
}

.sq-foot-right { font-variant-numeric: tabular-nums; }

.sq-extra {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  margin-top: var(--sq-extra-mt);
  font-size: var(--sq-extra-size);
  opacity: 0.92;
}

.sq-extra-left {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.sq-btn {
  border: 1px solid var(--sq-accent-20, rgba(15, 23, 42, 0.20));
  background: rgba(255, 255, 255, 0.85);
  color: inherit;
  border-radius: 999px;
  padding: 6px 10px;
  font-weight: 700;
  cursor: pointer;
  white-space: nowrap;
}

.sq-widget.sq-legendary .sq-btn {
  background: rgba(255, 255, 255, 0.75);
  padding: 8px 12px;
}

.sq-btn[disabled] {
  cursor: not-allowed;
  opacity: 0.6;
}

.sq-stats {
  display: grid;
  gap: 10px;
  margin-top: var(--sq-extra-mt);
}

.sq-stats-details > summary::-webkit-details-marker { display: none; }

.sq-stats-summary {
  cursor: pointer;
  list-style: none;
  font-weight: 800;
  font-size: 13px;
  padding: 6px 0;
  color: inherit;
}

.sq-widget.sq-legendary .sq-stats-summary { font-size: 15px; }

.sq-stats-body {
  display: grid;
  gap: 12px;
  padding: 6px 0 2px 0;
}

.sq-stats-empty {
  font-size: 12px;
  opacity: 0.75;
}

.sq-widget.sq-legendary .sq-stats-empty { font-size: 13px; }

.sq-section-title {
  font-size: 12px;
  font-weight: 700;
  margin-bottom: 6px;
}

.sq-widget.sq-legendary .sq-section-title { font-size: 13px; }

.sq-chart {
  width: 100%;
  border-radius: 12px;
  background: var(--sq-chart-bg);
  border: 1px solid var(--sq-accent-18, rgba(15, 23, 42, 0.18));
}

.sq-chart--lg { height: 160px; }
.sq-chart--md { height: 120px; }
.sq-chart--sm { height: 110px; }

.sq-toggle {
  display: flex;
  gap: 8px;
  margin: 4px 0 2px 0;
}

.sq-toggle-btn {
  border-radius: 999px;
  padding: 6px 10px;
  font-size: 11px;
  border: 1px solid var(--sq-accent-18, rgba(15, 23, 42, 0.18));
  background: rgba(255, 255, 255, 0.8);
  cursor: pointer;
}

.sq-toggle-btn.is-active {
  background: var(--sq-accent-12, rgba(15, 23, 42, 0.12));
}

.sq-widget.sq-legendary .sq-toggle-btn { font-size: 12px; }

.sq-chart-host { position: relative; }

.sq-tooltip {
  position: absolute;
  pointer-events: none;
  background: rgba(15, 23, 42, 0.92);
  color: white;
  padding: 6px 8px;
  border-radius: 8px;
  font-size: 11px;
  white-space: nowrap;
  transform: translate(-50%, -110%);
  opacity: 0;
  transition: opacity 120ms ease;
  z-index: 10;
}

.is-hidden { display: none; }

@keyframes sq_glowPulse { 0%,100%{transform:scale(1);opacity:.95} 50%{transform:scale(1.03);opacity:1} }
@keyframes sq_emberDrift { 0%{transform:translate3d(-8%,10%,0) scale(1);opacity:0} 12%{opacity:.55} 60%{opacity:.35} 100%{transform:translate3d(8%,-12%,0) scale(1.05);opacity:0} }
@keyframes sq_shimmerSweep { 0%{transform:translateX(-140%) skewX(-18deg);opacity:0} 12%{opacity:.7} 60%{opacity:.25} 100%{transform:translateX(140%) skewX(-18deg);opacity:0} }
@keyframes sq_runeSpin { 0%{transform:rotate(0deg);opacity:.55} 50%{opacity:.75} 100%{transform:rotate(360deg);opacity:.55} }
